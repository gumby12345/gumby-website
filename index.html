<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>gumby's house</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preload" as="audio" href="audio/click.mp3" type="audio/mpeg">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon"> <!-- Favicon Link -->
</head>
<body>
  <main>
    <section class="gallery">
      <img id="image1" src="images/GUMBYWEBFIXED1.png" alt="Main Image">
    </section>

    <div class="toggle-container">
      <button id="btnA" class="active">Personal Work</button>
      <button id="btnB">Client Work</button>
    </div>

    <section class="grid-container" id="galleryA">
      <!-- Gallery A images -->
      <img src="https://iili.io/FFz7AiP.webp" alt="Art 1">
      <!-- Other images unchanged -->
    </section>

    <section class="grid-container hidden" id="galleryB">
      <!-- Gallery B images -->
      <img src="https://iili.io/FFz7419.webp" alt="Client Art 1">
      <!-- Other images unchanged -->
    </section>

    <!-- Instagram Icon -->
    <a href="https://www.instagram.com/gumb_y/" target="_blank" id="instagram-link">
      <img id="instagram-icon" src="images/instagram.webp" alt="Instagram">
    </a>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (/Mac/i.test(navigator.platform)) {
        document.body.classList.add("macOS");
      }
    });

    const imageElement = document.getElementById("image1");
    const btnA = document.getElementById("btnA");
    const btnB = document.getElementById("btnB");
    const galleryA = document.getElementById("galleryA");
    const galleryB = document.getElementById("galleryB");
    const instagramIcon = document.getElementById("instagram-icon");

    const clickSound = new Audio("audio/click.mp3");
    const instagramSound = new Audio("audio/instagramsound.mp3");

    const images = [
      "images/GUMBYWEBFIXED1.webp",
      "images/GUMBYLOGO28.webp"
    ];

    const sounds = Array.from({ length: 120 }, (_, i) => `audio/sound${i + 1}.mp3`);

    let shownImages = [];
    let shownSounds = [];

    function getRandomItem(items, shownItems) {
      const weights = items.map(item => item.includes("GUMBYLOGO28.webp") ? 0.02 : 1);
      const remaining = items.filter(item => !shownItems.includes(item));
      if (remaining.length === 0) shownItems.length = 0;

      const remainingWeights = remaining.map(item => weights[items.indexOf(item)]);
      const totalWeight = remainingWeights.reduce((sum, weight) => sum + weight, 0);
      const normalizedWeights = remainingWeights.map(weight => weight / totalWeight);

      let cumulativeWeight = 0;
      const random = Math.random();
      for (let i = 0; i < remaining.length; i++) {
        cumulativeWeight += normalizedWeights[i];
        if (random < cumulativeWeight) {
          shownItems.push(remaining[i]);
          return remaining[i];
        }
      }
    }

    // Event listeners
    btnA.addEventListener("click", () => {
      galleryA.classList.remove("hidden");
      galleryB.classList.add("hidden");
      btnA.classList.add("active");
      btnB.classList.remove("active");
      clickSound.play();
    });

    btnB.addEventListener("click", () => {
      galleryB.classList.remove("hidden");
      galleryA.classList.add("hidden");
      btnB.classList.add("active");
      btnA.classList.remove("active");
      clickSound.play();
    });

    imageElement.addEventListener("click", () => {
      const newImage = getRandomItem(images, shownImages);
      imageElement.src = newImage;
      new Audio(getRandomItem(sounds, shownSounds)).play();
    });

    const instagramLink = document.getElementById("instagram-link");
    instagramLink.addEventListener("click", (e) => {
      e.preventDefault();
      instagramSound.play();
      setTimeout(() => {
        window.open("https://www.instagram.com/gumb_y/", "_blank");
      }, 500);
    });
  </script>
</body>
</html>
